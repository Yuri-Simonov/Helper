<mat-accordion>
    <mat-expansion-panel
        (opened)="panelOpenState = true"
        (closed)="panelOpenState = false"
    >
        <mat-expansion-panel-header>
            <mat-panel-title>
                Объясните принцип работы механизма "ChangeDetection"?
            </mat-panel-title>
        </mat-expansion-panel-header>
        <p>
            Механизм <code>ChangeDetection</code> или как его еще называют
            "отслеживание изменений" - это
            <span class="attention">
                механизм в Angular, который отвечает за изменение выражений в
                шаблонах при их изменении в компоненте.
            </span>
        </p>
        <p>
            Данный механизм запускается каждый раз, когда происходит какое-то
            браузерное событие, пользовать что-то сделал в приложении или
            вызывается <code>setInterval()</code> и тд. Причем в случае
            браузерных событий, Angular расширяет стандартный метод
            <code>addEventListener()</code>, добавляя после вызова
            "оригинального" обработчика события запуск отслеживания изменений.
        </p>
        <p>
            В механизме <code>ChangeDetection</code> важную роль играет
            библиотека <code>zone.js</code>, которая лежит под капотом Angular и
            делит все приложение на секции. Где происходят изменения, там и
            запускается механизм <code>ChangeDetection</code>.
        </p>
        <p>
            Еще один важный момент:
            <span class="attention"
                >запуск механизма ChangeDetection в родительском компоненте
                автоматически инициирует запуск механизма во всех дочерних
                компонентах.</span
            >
        </p>
        <i class="subtitle">ChangeDetectionStrategy</i>
        <p>
            В Angular есть два варианта работы алгоритма отслеживания изменений:
        </p>
        <ul>
            <li><span class="attention">OnPush</span>;</li>
            <li>
                <span class="attention">Default</span> (используется по
                умолчанию).
            </li>
        </ul>
        <p>
            Алгоритм задается в свойстве <code>changeDetection</code> объекта
            конфигурации декоратора <code>@Component()</code> и указывается для
            каждого компонента отдельно.
        </p>
        <pre><code><span class="keyword">@Component</span><span class="punctuation">{{'({'}}</span>
	<span class="key">selector</span>: <span class="string">'app-root'</span>, <span class="comment">// название компонента</span>
	<span class="key">templateUrl</span>: <span class="string">'./app.component.html'</span>, <span class="comment">// путь к HTML-файлу. Является обязательным свойством</span>
	<span class="key">changeDetection</span>: <span>ChangeDetectionStrategy.OnPush</span>, <span class="comment">// явное определение стратегии ChangeDetection</span>
<span class="punctuation">{{'})'}}</span>
<span></span>
<span class="export">export</span> <span class="keyword">class</span> <span class="class-name">AppComponent</span> <span class="punctuation">{{'{}'}}</span> <span class="comment">// класс, к которому привязывается декоратор @Component()</span></code></pre>
        <p>
            Итак, при варианте <code>Default</code> механизм отслеживания будет
            запускаться каждый раз при каком-либо изменении.
        </p>
        <p>
            Стратегия <code>OnPush</code> же указывается в основном для
            компонентов, которые предназначены для отображения каких-либо
            статических данных и будет запускаться только в момент создания
            компонента на стадии жизненного цикла <code>OnChanges</code>, а
            также при каждом последующем изменении его входных свойств, которые
            попадают в компонент с помощью декоратора <code>@Input()</code>.
        </p>
        <p>
            Такой подход используется в целях повышения эффективности работы
            приложения за счет снижения количества вызовов механизма
            <code>ChangeDetection</code>.
        </p>
    </mat-expansion-panel>
</mat-accordion>
